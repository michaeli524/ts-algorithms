# 闭包

闭包是 JS 中的重要概念，可以让 JS 实现很多高级特性。例如，数据封装、事件处理器、回调函数等场景。通过闭包，可以实现更强大的功能和更灵活的代码设计。

## 定义

闭包指的是一个函数及其周围环境（即词法环境）的组合。这个环境包含了这个闭包创建时作用域内部的任何局部变量。

闭包可以让开发者使用内部函数访问外部函数的作用域。闭包随着函数创建的同时而被创建。

## 核心特性

闭包的核心特性是：函数可以记住它被创建时的词法环境，无论函数在任何作用域内被调用时，都可以访问这个词法环境中的变量。

例如，一个内部函数引用了外部函数的变量时，即使外部函数已经执行完毕，这个变量也不会被垃圾回收，因为内部函数的闭包保留了对这个变量的引用。

### 词法环境

词法环境（Lexical Environment）是 JavaScript 中的一个抽象概念，用于定义如何在代码中存储变量和函数。一个词法环境包含了两个部分：

1. **环境记录（Environment Record）**：这是一个存储变量和函数声明的实际地方。
2. **对外部环境的引用**：这可以理解为一个指针，指向外部的词法环境。这使得函数能够访问外部函数或全局作用域中的变量。

```js
function init() {
  var name = "Mozilla"; // name 是一个被 init 创建的局部变量
  function displayName() {
    // displayName() 是内部函数，一个闭包
    alert(name); // 使用了父函数中声明的变量
  }
  displayName();
}
init();
```

