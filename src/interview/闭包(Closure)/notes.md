# 闭包

闭包是 JS 中的重要概念，可以让 JS 实现很多高级特性。例如，数据封装、事件处理器、回调函数等场景。通过闭包，可以实现更强大的功能和更灵活的代码设计。

## 定义

闭包指的是一个函数及其周围环境（即词法环境）的组合。这个环境包含了这个闭包创建时作用域内部的任何局部变量。

闭包可以让开发者使用内部函数访问外部函数的作用域。闭包随着函数创建的同时而被创建。

## 核心特性

闭包的核心特性是：函数可以记住它被创建时的词法环境，无论函数在任何作用域内被调用时，都可以访问这个词法环境中的变量。

例如，一个内部函数引用了外部函数的变量时，即使外部函数已经执行完毕，这个变量也不会被垃圾回收，因为内部函数的闭包保留了对这个变量的引用。

## 例子

最简单的闭包，内部函数使用外部变量。

```js
function init() {
  var name = "Mozilla"; // name 是一个被 init 创建的局部变量
  function displayName() {
    // displayName() 是内部函数，一个闭包
    alert(name); // 使用了父函数中声明的变量
  }
  displayName();
}
init();
```

特性体现：外部函数已经执行完毕，但是闭包创建时存储了词法环境中的变量，达到外部函数就算已经结束但仍然可以调用变量的效果。

```js
function makeFunc() {
  var name = "Mozilla";
  function displayName() {
    alert(name);
  }
  return displayName;
}

var myFunc = makeFunc();
myFunc();
```

## 实用的闭包

闭包允许将函数和其所操作的某些数据（环境）关联起来。这显然类似面向对象编程。

面向对象编程中，对象允许我们将某些数据（对象的属性）与一个或多个方法相关联。

Web编程中，大部分我们写的代码都是基于事件的 - 定义某种行为，然后将其添加到用户触发的事件之上。我们的代码通常作为回调：为响应事件而执行的函数。
