# 事件循环

## 定义

首先，JS 是一门单线程语言，意味着同一时间内只能做一件事，但是这不意味着单线程就是阻塞，实现单线程非阻塞的方法就是事件循环。

在 JS 中，所有的任务都可以分为：

- 同步任务：立即执行的任务，同步任务直接放进主线程中执行
- 异步任务：异步执行的任务，比如 ajax 网络请求，settimeout 定是函数等。

同步任务进入主线程，即主任务栈，异步任务进入任务队列，主线程内的任务执行完毕后，去任务队列读取对应的任务，推入主线程执行。这个过程不断的重复就是事件循环。

## 宏任务和微任务

异步任务被细分为宏任务和微任务

### 微任务

常见的微任务有：

- Promise.then
- await 阻塞的内容

### 宏任务

常见的宏任务有：

- script (可以理解为外层同步代码)
- setTimeout/setInterval
- UI rendering/UI 事件
- postMessage、MessageChannel
- setImmediate、I/O（Node.js）
